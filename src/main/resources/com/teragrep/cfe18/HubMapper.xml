<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.teragrep.cfe18.HubMapper">

    <!-- insert     ( proc_fqhost VARCHAR(128), proc_md5 VARCHAR(32),
                                           proc_ip VARCHAR(255) ) -->
    <select id="create" resultMap="insertedID" statementType="CALLABLE">
        {CALL location.insert_cfe_hub(#{param1},#{param2},#{param3})}
    </select>


    <!-- select     ( proc_hub_id INT, tx_id INT ) -->
    <select id="get" resultMap="hub" statementType="CALLABLE">
        {CALL location.select_cfe_hub(#{param1},#{param2})}
    </select>
    <resultMap id="hub" type="com.teragrep.cfe18.handlers.entities.Hub">
        <result property="id"           column="id"/>
        <result property="hostId"       column="host_id"/>
        <result property="fqHost"       column="hub_fq_host"/>
        <result property="ip"           column="ip"/>
        <result property="md5"          column="md5"/>
    </resultMap>


    <!-- GET ALL    ( tx_id INT )-->
    <select id="getAll" resultMap="allHub" statementType="CALLABLE">
        {CALL cfe_00.select_all_hubs(#{param1})}
    </select>
    <resultMap id="allHub" type="com.teragrep.cfe18.handlers.entities.Hub">
        <result property="id"           column="id"/>
        <result property="hostId"       column="host_id"/>
        <result property="fqHost"       column="hub_fq_host"/>
        <result property="ip"           column="ip"/>
        <result property="md5"          column="md5"/>
    </resultMap>


    <!-- Delete    ( proc_hub_id INT ) -->
    <select id="delete" statementType="CALLABLE">
        {CALL cfe_00.delete_hub(#{param1})}
    </select>


    <!-- ID return map -->
    <resultMap id="insertedID" type="com.teragrep.cfe18.handlers.entities.Hub">
        <result property="id"       column="id"/>
    </resultMap>

</mapper>

